<div ng-if="currentUser.permissions.link_geodata
       && currentElement.element.id
       && !currentElement.element.geodata_id"
>
    <div ng-if="!isLinkPossible(currentGeodata.type, currentElement.geometryType)" translate="map-marker.wrong-type.info" translate-values="{ gtype: currentGeodata.type, ctype: currentElement.geometryType }">
    </div>
    <button
        type="button"
        class="btn btn-sm btn-success"
        ng-click="linkGeodata(currentElement.element.id, currentGeodata.id)"
        ng-if="isLinkPossible(currentGeodata.type, currentElement.geometryType)"
    >
        <i class="material-icons">link</i> <span translate="map-marker.actions.context-link" translate-values="{ context: currentElement.element.name }"></span>
    </button>
</div>
<h4 ng-if="currentUser.permissions.link_geodata
       && currentElement.element.geodata_id
       && currentElement.element.geodata_id == currentGeodata.id">
    {{ currentElement.element.name }}
</h4>

<div ng-if="!currentElement.element.id">
    <p translate="map-marker.not-linked-info"></p>
    <p ng-if="currentUser.permissions.link_geodata" translate="map-marker.how-to-link"></p>
</div>
<p ng-if="currentUser.permissions.link_geodata
       && currentElement.element.geodata_id
       && currentElement.element.geodata_id == currentGeodata.id">
    <button
        type="button"
        class="btn btn-xs btn-success"
        ng-click="unlinkGeodata(currentElement.element.id)">
        <i class="material-icons">link</i> <span translate="map-marker.actions.context-unlink" translate-values="{ context: currentElement.element.name }"></span>
    </button>
</p>

<div ng-init="collapsed=true">
    <button ng-click="collapsed=!collapsed" class="btn btn-primary clickable">{{'map-marker.options.label'|translate}} <i class="material-icons">{{ collapsed ? 'arrow_drop_down' : 'arrow_drop_up' }}</i></button>
    <div ng-if="!collapsed">
        <form class="form-horizontal" role="form">
            <div class="form-group">
                <label class="control-label col-md-3" for="color_{{ currentGeodata.id }}">
                    {{'map-marker.options.color'|translate}}:
                </label>
                <div class="col-md-9">
                    <input class="form-control" type="color" name="color_{{ currentGeodata.id }}" ng-model="currentGeodata.color" id="color_{{ currentGeodata.id }}" ng-disabled="!currentUser.permissions.duplicate_edit_concepts"/>
                </div>
            </div>
            <div ng-if="currentGeodata.type == 'Point'">
                <div class="form-group">
                    <label class="control-label col-md-3" for="lat_{{ currentGeodata.id }}">
                        {{'map-marker.options.lat'|translate}}:
                    </label>
                    <div class="col-md-9">
                        <input class="form-control" type="number" step="0.000001" min="-180" max="180" name="lat_{{ currentGeodata.id }}" ng-model="currentGeodata.lat" id="lat_{{ currentGeodata.id }}" ng-disabled="!currentUser.permissions.duplicate_edit_concepts"/>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-3" for="lng_{{ currentGeodata.id }}">
                        {{'map-marker.options.lng'|translate}}:
                    </label>
                    <div class="col-md-9">
                        <input class="form-control" type="number" step="0.000001" min="-180" max="180" name="lng_{{ currentGeodata.id }}" ng-model="currentGeodata.lng" id="lng_{{ currentGeodata.id }}" ng-disabled="!currentUser.permissions.duplicate_edit_concepts"/>
                    </div>
                </div>
            </div>

            <button type="button" class="btn btn-xs btn-success" ng-click="updateMarkerOptions(currentGeodata)" ng-if="currentUser.permissions.duplicate_edit_concepts"><i class="material-icons">save</i> {{'map-marker.save'|translate}}</button>

        </form>
    </div>
</div>
