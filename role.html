<div resize-watcher>
    <table class="table table-striped table-hover" ng-if="$ctrl.user.permissions.add_edit_role || $ctrl.user.permissions.delete_role">
        <tr>
            <th>
                {{ 'role.name' | translate }}
            </th>
            <th>
                {{ 'role.display_name' | translate }}
            </th>
            <th>
                {{ 'role.description' | translate }}
            </th>
            <th ng-if="$ctrl.user.permissions.add_remove_permission">
                {{ 'role.permissions' | translate }}
            </th>
            <th ng-if="$ctrl.user.permissions.add_edit_role || $ctrl.user.permissions.delete_role">
                {{ 'role.options' | translate }}
            </th>
            <th>
                {{'user.created-at'|translate}}
            </th>
            <th>
                {{'user.updated-at'|translate}}
            </th>
        </tr>
        <tr ng-repeat="role in $ctrl.roles">
            <td>
                {{ role.name }}
            </td>
            <td>
                {{ role.display_name }}
            </td>
            <td>
                {{ role.description }}
            </td>
            <td ng-if="$ctrl.user.permissions.add_remove_permission">
                <ui-select multiple ng-model="role.permissions" close-on-select="false" name="role_permissions_{{ role.id }}" id="role_permissions_{{ role.id }}" on-select="addRolePermission($item, role)" on-remove="removeRolePermission($item, role)">
                    <ui-select-match><span uib-tooltip="{{ $item.description }}">{{ $item.display_name }}</span></ui-select-match>
                    <ui-select-choices repeat="permission in $ctrl.permissions | filter:$select.search">
                        {{ permission.display_name }}
                    </ui-select-choices>
                </ui-select>
            </td>
            <th ng-if="$ctrl.user.permissions.add_edit_role || $ctrl.user.permissions.delete_role">
                <button type="button" class="btn btn-info" ui-sref="root.role.edit({id: role.id})" ng-if="$ctrl.user.permissions.add_edit_role">
                    <i class="material-icons">edit</i>
                </button> <button type="button" class="btn btn-danger" ng-click="deleteRole(role)" ng-if="$ctrl.user.permissions.delete_role">
                    <i class="material-icons">delete</i>
                </button>
            </th>
            <td>
                {{ role.created_at }}
            </td>
            <td>
                {{ role.updated_at }}
            </td>
        </tr>
    </table>
    <button type="button" class="btn btn-success" ng-click="openAddRoleDialog()" ng-if="$ctrl.user.permissions.add_edit_role">
        <i class="material-icons">add</i> {{ 'role.add' | translate }}
    </button>
</div>
