<div resize-watcher>
    <ui-view></ui-view>
    <form class="form-inline" id="literature-search-form">
        <div class="form-group">
            <div class="input-group">
                <div class="input-group-addon">
                    <i class="material-icons">search</i>
                </div>
                <input type="text" class="form-control" placeholder="{{'literature.search-placeholder'|translate}}" ng-model="$ctrl.searchTerm">
            </div>
        </div>
        <button type="button" class="btn btn-success" id="literature-add-button" ng-click="$ctrl.openAddLiteratureDialog()" ng-if="$ctrl.user.permissions.add_remove_literature">
            <i class="material-icons">add</i> {{'literature.add'|translate}}
        </button>
        <button type="file" id="literature-import-button" class="btn btn-primary" ngf-select="$ctrl.importBibTexFile($file, $invalidFiles)" accept="application/rdf+xml,text/plain,application/x-turtle" ngf-max-size="10MB" ng-if="$ctrl.user.permissions.add_remove_literature">
            Import BibTex File
        </button>
    </form>
    <div id="literature-container" class="table-responsive">
        <table class="table table-striped table-hover" id="literature-table">
            <thead>
                <tr>
                    <td>
                        <a href="" ng-click="$ctrl.sortType = 'type'; $ctrl.sortReverse = !$ctrl.sortReverse">
                            {{'literature.bibtex.type'|translate}}
                            <i ng-show="$ctrl.sortType == 'type' && !$ctrl.sortReverse" class="material-icons">arrow_drop_down</i>
                            <i ng-show="$ctrl.sortType == 'type' && $ctrl.sortReverse" class="material-icons">arrow_drop_up</i>
                        </a>
                    </td>
                    <td>
                        <a href="" ng-click="$ctrl.sortType = 'citekey'; $ctrl.sortReverse = !$ctrl.sortReverse">
                            {{'literature.bibtex.citekey'|translate}}
                            <i ng-show="$ctrl.sortType == 'citekey' && !$ctrl.sortReverse" class="material-icons">arrow_drop_down</i>
                            <i ng-show="$ctrl.sortType == 'citekey' && $ctrl.sortReverse" class="material-icons">arrow_drop_up</i>
                        </a>
                    </td>
                    <td>
                        <a href="" ng-click="$ctrl.sortType = 'author'; $ctrl.sortReverse = !$ctrl.sortReverse">
                            {{'literature.bibtex.author'|translate}}
                            <i ng-show="$ctrl.sortType == 'author' && !$ctrl.sortReverse" class="material-icons">arrow_drop_down</i>
                            <i ng-show="$ctrl.sortType == 'author' && $ctrl.sortReverse" class="material-icons">arrow_drop_up</i>
                        </a>
                    </td>
                    <td>
                        <a href="" ng-click="$ctrl.sortType = 'editor'; $ctrl.sortReverse = !$ctrl.sortReverse">
                            {{'literature.bibtex.editor'|translate}}
                            <i ng-show="$ctrl.sortType == 'editor' && !$ctrl.sortReverse" class="material-icons">arrow_drop_down</i>
                            <i ng-show="$ctrl.sortType == 'editor' && $ctrl.sortReverse" class="material-icons">arrow_drop_up</i>
                        </a>
                    </td>
                    <td>
                        <a href="" ng-click="$ctrl.sortType = 'title'; $ctrl.sortReverse = !$ctrl.sortReverse">
                            {{'literature.bibtex.title'|translate}}
                            <i ng-show="$ctrl.sortType == 'title' && !$ctrl.sortReverse" class="material-icons">arrow_drop_down</i>
                            <i ng-show="$ctrl.sortType == 'title' && $ctrl.sortReverse" class="material-icons">arrow_drop_up</i>
                        </a>
                    </td>
                    <td>
                        <a href="" ng-click="$ctrl.sortType = 'journal'; $ctrl.sortReverse = !$ctrl.sortReverse">
                            {{'literature.bibtex.journal'|translate}}
                            <i ng-show="$ctrl.sortType == 'journal' && !$ctrl.sortReverse" class="material-icons">arrow_drop_down</i>
                            <i ng-show="$ctrl.sortType == 'journal' && $ctrl.sortReverse" class="material-icons">arrow_drop_up</i>
                        </a>
                    </td>
                    <td>
                        <a href="" ng-click="$ctrl.sortType = 'year'; $ctrl.sortReverse = !$ctrl.sortReverse">
                            {{'literature.bibtex.year'|translate}}
                            <i ng-show="$ctrl.sortType == 'year' && !$ctrl.sortReverse" class="material-icons">arrow_drop_down</i>
                            <i ng-show="$ctrl.sortType == 'year' && $ctrl.sortReverse" class="material-icons">arrow_drop_up</i>
                        </a>
                    </td>
                    <td>
                    	{{'literature.bibtex.month'|translate}}
                    </td>
                    <td>
                    	{{'literature.bibtex.pages'|translate}}
                    </td>
                    <td>
                        {{'literature.bibtex.volume'|translate}}
                    </td>
                    <td>
                        {{'literature.bibtex.number'|translate}}
                    </td>
                    <td>
                    	{{'literature.bibtex.chapter'|translate}}
                    </td>
                    <td>
                    	{{'literature.bibtex.edition'|translate}}
                    </td>
                    <td>
                    	{{'literature.bibtex.series'|translate}}
                    </td>
                    <td>
                        <a href="" ng-click="$ctrl.sortType = 'booktitle'; $ctrl.sortReverse = !$ctrl.sortReverse">
                            {{'literature.bibtex.booktitle'|translate}}
                            <i ng-show="$ctrl.sortType == 'booktitle' && !$ctrl.sortReverse" class="material-icons">arrow_drop_down</i>
                            <i ng-show="$ctrl.sortType == 'booktitle' && $ctrl.sortReverse" class="material-icons">arrow_drop_up</i>
                        </a>
                    </td>
                    <td>
                        <a href="" ng-click="$ctrl.sortType = 'publisher'; $ctrl.sortReverse = !$ctrl.sortReverse">
                            {{'literature.bibtex.publisher'|translate}}
                            <i ng-show="$ctrl.sortType == 'publisher' && !$ctrl.sortReverse" class="material-icons">arrow_drop_down</i>
                            <i ng-show="$ctrl.sortType == 'publisher' && $ctrl.sortReverse" class="material-icons">arrow_drop_up</i>
                        </a>
                    </td>
                    <td>
                        <a href="" ng-click="$ctrl.sortType = 'address'; $ctrl.sortReverse = !$ctrl.sortReverse">
                            {{'literature.bibtex.address'|translate}}
                            <i ng-show="$ctrl.sortType == 'address' && !$ctrl.sortReverse" class="material-icons">arrow_drop_down</i>
                            <i ng-show="$ctrl.sortType == 'address' && $ctrl.sortReverse" class="material-icons">arrow_drop_up</i>
                        </a>
                    </td>
                    <td>
                    	{{'literature.bibtex.note'|translate}}
                    </td>
                    <td>
                    	{{'literature.created-at'|translate}}
                    </td>
                    <td>
                    	{{'literature.updated-at'|translate}}
                    </td>
                    <td>
                        <a href="" ng-click="$ctrl.sortType = 'misc'; $ctrl.sortReverse = !$ctrl.sortReverse">
                            {{'literature.bibtex.misc'|translate}}
                            <i ng-show="$ctrl.sortType == 'misc' && !$ctrl.sortReverse" class="material-icons">arrow_drop_down</i>
                            <i ng-show="$ctrl.sortType == 'misc' && $ctrl.sortReverse" class="material-icons">arrow_drop_up</i>
                        </a>
                    </td>
                    <td>
                        <a href="" ng-click="$ctrl.sortType = 'howpublished'; $ctrl.sortReverse = !$ctrl.sortReverse">
                            {{'literature.bibtex.howpublished'|translate}}
                            <i ng-show="$ctrl.sortType == 'howpublished' && !$ctrl.sortReverse" class="material-icons">arrow_drop_down</i>
                            <i ng-show="$ctrl.sortType == 'howpublished' && $ctrl.sortReverse" class="material-icons">arrow_drop_up</i>
                        </a>
                    </td>
                    <td>
                    	{{'literature.bibtex.institution'|translate}}
                    </td>
                    <td>
                    	{{'literature.bibtex.organization'|translate}}
                    </td>
                    <td>
                    	{{'literature.bibtex.school'|translate}}
                    </td>
                    <td ng-if="$ctrl.user.permissions.add_remove_literature">
                        {{'literature.delete'|translate}}
                    </td>
                    <td ng-if="$ctrl.user.permissions.edit_literature">
                        {{'literature.edit'|translate}}
                    </td>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="entry in $ctrl.bibliography | orderBy:['!' + $ctrl.sortType, $ctrl.sortType]:$ctrl.sortReverse | filter:$ctrl.searchTerm">
                    <td>
                        {{ entry.type }}
                    </td>
                    <td>
                        {{ entry.citekey }}
                    </td>
                    <td>
                    	{{ entry.author }}
                    </td>
                    <td>
                    	{{ entry.editor }}
                    </td>
                    <td>
                    	{{ entry.title }}
                    </td>
                    <td>
                    	{{ entry.journal }}
                    </td>
                    <td>
                    	{{ entry.year }}
                    </td>
                    <td>
                    	{{ entry.month }}
                    </td>
                    <td>
                    	{{ entry.pages }}
                    </td>
                    <td>
                    	{{ entry.volume }}
                    </td>
                    <td>
                    	{{ entry.number }}
                    </td>
                    <td>
                    	{{ entry.chapter }}
                    </td>
                    <td>
                    	{{ entry.edition }}
                    </td>
                    <td>
                    	{{ entry.series }}
                    </td>
                    <td>
                    	{{ entry.booktitle }}
                    </td>
                    <td>
                    	{{ entry.publisher }}
                    </td>
                    <td>
                    	{{ entry.address }}
                    </td>
                    <td>
                    	{{ entry.note }}
                    </td>
                    <td>
                    	{{ entry.created_at }}
                    </td>
                    <td>
                    	{{ entry.updated_at }}
                    </td>
                    <td>
                    	{{ entry.misc }}
                    </td>
                    <td>
                    	{{ entry.howpublished }}
                    </td>
                    <td>
                    	{{ entry.institution }}
                    </td>
                    <td>
                    	{{ entry.organization }}
                    </td>
                    <td>
                    	{{ entry.school }}
                    </td>
                    <td ng-if="$ctrl.user.permissions.add_remove_literature">
                        <button type="button" class="btn btn-danger" ng-click="$ctrl.deleteLiteratureEntry(entry)">
                            <i class="material-icons">delete</i>
                        </button>
                    </td>
                    <td ng-if="$ctrl.user.permissions.edit_literature">
                        <button type="button" class="btn btn-info" ui-sref="root.bibliography.edit({id: entry.id})">
                            <i class="material-icons">mode_edit</i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
