<div ng-init="useFunc = false;">
    <div style="text-align: right;">
        <a href="" ng-click="$ctrl.closePopover($event)">
            <i class="material-icons md-dark">clear</i>
        </a>
    </div>
    <form class="form-horizontal">
        <div class="form-group">
            <label class="control-label col-md-2">Comparison:</label>
            <div class="col-md-10">
                <ui-select ng-model="$ctrl.selectedComp">
                    <ui-select-match allow-clear="false">
                        {{ $select.selected.label }}
                    </ui-select-match>
                    <ui-select-choices repeat="c in $ctrl.selectedComps | filter: $select.search">
                        <span ng-bind-html="c.label | highlight: $select.search"></span>
                    </ui-select-choices>
                </ui-select>
            </div>
        </div>
        <div class="form-group" ng-if="$ctrl.selectedComp.needs_value">
            <label class="control-label col-md-2">Comparison Value:</label>
            <div class="col-md-10">
                <input type="text" class="form-control" ng-if="$ctrl.selectedType == 'string'" ng-model="$ctrl.selectedComp_value" />

                <div ng-if="$ctrl.selectedType == 'date'">
                    <input type="text" class="form-control" uib-datepicker-popup="{{ 'date_format_lg' | translate }}" is-open="opened" close-text="{{ 'close' | translate }}" ng-model="$ctrl.selectedComp_value"  ng-model-options="{timezone:'utc'}" />
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-init="opened=false" ng-click="opened=!opened"><i class="material-icons">event</i></button>
                    </span>
                </div>
            </div>
        </div>
        <div class="flex-hr-center">
            <button type="button" class="btn btn-default" ng-click="$ctrl.addFilter($ctrl.selectedColumn, $ctrl.selectedComp.comp, $ctrl.selectedComp_value, $ctrl.func, $ctrl.func_values, true)" ng-disabled="!$ctrl.selectedComp || ($ctrl.selectedComp.needs_value && !$ctrl.selectedComp_value)">
                AND
            </button>
            <button type="button" class="btn btn-default" ng-click="$ctrl.addFilter($ctrl.selectedColumn, $ctrl.selectedComp.comp, $ctrl.selectedComp_value, $ctrl.func, $ctrl.func_values, false)" ng-disabled="!$ctrl.selectedComp || ($ctrl.selectedComp.needs_value && !$ctrl.selectedComp_value)">
                OR
            </button>
        </div>
    </form>
</div>
